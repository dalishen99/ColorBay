# 基础合约Colorbay测试用例
#### 测试功能点：转账（包括授权转账）、锁/解仓、冻结账户、超管、增发、燃烧、更新代币名字和简称、更换合约管理员、禁止接收ETH、安全运算库

#### 测试数据
**代币**
- 彩贝发行总量为 1,000,000,000 个token
- 激励          占比35%，即350,000,000个token
- 私募          占比20%，即200,000,000个token
- 团队及基金会    占比25%，即250,000,000个token
- 社区培养及推广  占比20%，即200,000,000个token

---
**账号**
- 管理员 `0xca3...a733c`
- 张三  `0x147...c160c`
- 李四  `0x4b0...4d2db`
- 王五  `0x583...40225`
---
- 管理员 `0xca35b7d915458ef540ade6068dfe2f44e8fa733c`
- 张三  `0x14723a09acff6d2a60dcdf7aa4aff308fddc160c`
- 李四  `0x4b0897b0513fdc7c541b6d9d7e929c4e5364d2db`
- 王五  `0x583031d1113ad414f02576bd6afabfb302140225`

---

#### 用例1——创建代币合约CLB
只有管理员拥有操作权限

1、创建一个代币合约CLB；

2、查看事件日志。

---

#### 用例2——查看合约
1、查询代币名称、简称、管理员地址、仓库状态、是否可增发。
```
name()
symbol()
owner()
paused()
mintingFinished()
```
---

#### 用例3——转账
1、切换到管理员账号`0xca3...a733c`下，给张三`0x147...c160c`转账1000个CLB，执行：
```
transfer("0x14723a09acff6d2a60dcdf7aa4aff308fddc160c", "1000,000000000000000000") #约定：运行时，去除数额中的逗号，否则会出错
```

2、查询张三账号`0x147...c160c`余额
```
balanceOf("0x14723a09acff6d2a60dcdf7aa4aff308fddc160c")
```

---

#### 用例4——授权转账
1、切换到管理员账号`0xca3...a733c`下，给李四账号`0x4b0...4d2db`授权额度2亿，执行:
```
approve("0x4b0897b0513fdc7c541b6d9d7e929c4e5364d2db", "2000000000,000000000000000000")
```
2、查询李四账号`0x4b0...4d2db`的授权额度
```
allowance("0xca35b7d915458ef540ade6068dfe2f44e8fa733c", "0x4b0897b0513fdc7c541b6d9d7e929c4e5364d2db")
```
3、李四账号`0x4b0...4d2db`给王五账号`0x583...40225`转账3000个CLB，切换到李四账号`0x4b0...4d2db`下，执行：
```
transferFrom("0xca35b7d915458ef540ade6068dfe2f44e8fa733c","0x583031d1113ad414f02576bd6afabfb302140225","3000,000000000000000000")
```
4、查询王五账号`0x583...40225`余额
```
balanceOf("0x583031d1113ad414f02576bd6afabfb302140225")
```
5、查询管理员账号`0xca3...a733c`余额
```
balanceOf("0xca35b7d915458ef540ade6068dfe2f44e8fa733c")
```
6、查询李四账号`0x4b0...4d2db`剩余的授权额度
```
allowance("0xca35b7d915458ef540ade6068dfe2f44e8fa733c", "0x4b0897b0513fdc7c541b6d9d7e929c4e5364d2db")
```
7、增加授权额度，切换到管理员账号`0xca3...a733c`下，给李四账号`0x4b0...4d2db`授权额度增加4000个CLB，执行:
```
increaseApproval("0x4b0897b0513fdc7c541b6d9d7e929c4e5364d2db", "4000,000000000000000000")
```
重复第6步，查询授权额度
8、切换到管理员账号`0xca3...a733c`下，给李四账号`0x4b0...4d2db`授权额度减少4000个CLB，执行:

```
decreaseApproval("0x4b0897b0513fdc7c541b6d9d7e929c4e5364d2db", "4000,000000000000000000")
```
重复第6步，查询授权额度

#### 用例5——锁/解仓、超管
只有管理员拥有操作权限
锁仓后，相关函数被禁用：`transfer、transferFrom、approve、increaseApproval、decreaseApproval`

1、切换到李四账号`0x4b0...4d2db`下，执行锁仓，将报错，没有权限
```
pause()
```
2、切换到管理员账号`0xca3...a733c`下，执行锁仓，将成功
```
pause()
```
3、查询仓库状态
```
paused()
```
4、李四给王五账号`0x583...40225`转账3000个CLB，切换到李四账号`0x4b0...4d2db`下，执行将失败，因为已锁仓：
```
transferFrom("0xca35b7d915458ef540ade6068dfe2f44e8fa733c","0x583031d1113ad414f02576bd6afabfb302140225","3000,000000000000000000")
```
5、切换到李四账号`0x4b0...4d2db`下，执行解仓，将报错，没有权限
```
unpause()
```
6、切换到管理员账号`0xca3...a733c`下，执行锁仓:
```
unpause()
```
7、查询仓库状态
```
paused()
```

#### 用例6——冻结账户
只有管理员拥有操作权限

1、查询王五账号`0x583...40225`是否被冻结
```
frozenAccount("0x583031d1113ad414f02576bd6afabfb302140225")
```
2、切换到王五账号`0x583...40225`下，自己冻结自己，将会失败，因为没有权限
```
freezeAccount("0x583031d1113ad414f02576bd6afabfb302140225", true)
```
3、切换到管理员账号`0xca3...a733c`下，冻结王五账号`0x583...40225`
```
freezeAccount("0x583031d1113ad414f02576bd6afabfb302140225", true)
```
4、切换到王五账号`0x583...40225`下，给李四账号`0x4b0...4d2db`转账1000个CLB
```
transfer("0x4b0897b0513fdc7c541b6d9d7e929c4e5364d2db", "1000,000000000000000000")
```

5、切换到管理员账号`0xca3...a733c`下，解冻王五账号`0x583...40225`
```
freezeAccount("0x583031d1113ad414f02576bd6afabfb302140225", false)
```
重复第1、3步


#### 用例7——增发
只有管理员拥有操作权限

1、查询是否可增发
```
mintingFinished()
```
2、查询CLB总量
```
totalSupply
```
3、切换到李四账号`0x4b0...4d2db`下，增发10000个CLB，将会报错，因为没有权限：
```
mint("0xca35b7d915458ef540ade6068dfe2f44e8fa733c", "10000,000000000000000000")
```
4、切换到管理员账号`0xca3...a733c`下，增发10000个CLB
```
mint("0xca35b7d915458ef540ade6068dfe2f44e8fa733c", "10000,000000000000000000")
```
重复第2步

5、关闭增发
```
finishMinting
```
重复第3步


#### 用例8——燃烧
只有管理员拥有操作权限

1、查询CLB总量
```
totalSupply
```
2、切换到李四账号`0x4b0...4d2db`下，燃烧代币总量中的10000个CLB，将会报错，因为没有权限：
```
burn("10000,000000000000000000")
```
3、切换到管理员账号`0xca3...a733c`下，燃烧代币总量中的10000个CLB
```
burn("10000,000000000000000000")
```
重复第1步

#### 用例9——更新代币名字和简称
只有管理员拥有操作权限

1、查看当前代币名字和简称
2、切换到李四账号`0x4b0...4d2db`下，执行更新，将会报错，因为没有权限：
```
setTokenInformation("Colorbay Token 2", "CLB2")
```
3、切换到管理员账号`0xca3...a733c`下，执行更新：
```
setTokenInformation("Colorbay Token 2", "CLB2")
```
重复第1步

#### 用例10——更换合约管理员
只有管理员拥有操作权限

1、切换到李四账号`0x4b0...4d2db`下，执行更新，将会报错，因为没有权限：
```
transferOwnership("0x4b0897b0513fdc7c541b6d9d7e929c4e5364d2db")
```
2、切换到当前管理员账号`0xca3...a733c`下，将管理员身份转让给李四：
```
transferOwnership("0x4b0897b0513fdc7c541b6d9d7e929c4e5364d2db")
```
3、查询当前管理员账号
```
owner()
```
4、用原管理员账号，做增发、燃烧、锁/解仓、更新代币名字和简称操作，将会失败，因为没有权限
```
burn("10000,000000000000000000") #增发
mint("0xca35b7d915458ef540ade6068dfe2f44e8fa733c", "10000,000000000000000000") #燃烧
pause() #锁仓
unpause() #解仓
setTokenInformation("Colorbay Token 3", "CBT3")
```
#### 用例11——合约禁用接收ETH
```
fallback()
```

